CREATE TABLE todo (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    idx INTEGER AS Int NOT NULL DEFAULT -1,
    listId INTEGER NOT NULL REFERENCES list(id),
    isDone INTEGER AS Boolean NOT NULL DEFAULT 0,
    text TEXT NOT NULL DEFAULT ""
);

selectByListId:
SELECT *
FROM todo
WHERE listId = :listId;

selectById:
SELECT *
FROM todo
WHERE id = :id
LIMIT 1;

selectAll:
SELECT *
FROM todo;

insert:
INSERT INTO todo(idx, listId, text)
VALUES (:index, :listId, :text);

update:
UPDATE todo
SET isDone = :isDone, text = :text
WHERE id = :id;

delete:
DELETE FROM todo
WHERE id = :id;

decrementAllFrom:
UPDATE todo
SET idx = idx - 1
WHERE idx > :index;